# –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é Task Manager –ø—Ä–æ–µ–∫—Ç–∞

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –û —Ç–µ–∫—É—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ

### ‚ö†Ô∏è SUPABASE - –≠–¢–û –°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï! –ù–ï –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï –ï–ì–û –í –ù–û–í–û–ú –ü–†–û–ï–ö–¢–ï!

**–¢–ï–ö–£–©–ò–ô –ü–†–û–ï–ö–¢ –ò–°–ü–û–õ–¨–ó–£–ï–¢ SUPABASE - –≠–¢–û –°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï!**

–î–∞–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç **–°–£–©–ï–°–¢–í–£–Æ–©–ò–ô** –ø—Ä–æ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å **Supabase** (Backend-as-a-Service).

**–ù–û–í–´–ô –ü–†–û–ï–ö–¢ –î–û–õ–ñ–ï–ù –†–ê–ë–û–¢–ê–¢–¨ –° –î–†–£–ì–û–ô –ë–ê–ó–û–ô –î–ê–ù–ù–´–•!**

Supabase –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
- ‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase**
- ‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase –∫–ª–∏–µ–Ω—Ç—ã (@supabase/ssr, @supabase/supabase-js)**
- ‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase RLS –ø–æ–ª–∏—Ç–∏–∫–∏**
- ‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase Realtime**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é –ë–î (PostgreSQL, MySQL, MongoDB –∏ —Ç.–¥.)
- ‚úÖ –°–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π backend API (Node.js/Express, NestJS –∏ —Ç.–¥.)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ (JWT, —Å–µ—Å—Å–∏–∏)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å realtime —á–µ—Ä–µ–∑ WebSockets (Socket.io) –∏–ª–∏ –¥—Ä—É–≥–æ–π –º–µ—Ö–∞–Ω–∏–∑–º
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –≤ Backend API

**–†–∞–∑–¥–µ–ª "–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –¥—Ä—É–≥—É—é –ë–î"** —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–¥ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [‚ö†Ô∏è –í–ê–ñ–ù–û: Supabase - —Å—Ç–∞—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ](#–≤–∞–∂–Ω–æ-supabase---—Å—Ç–∞—Ä–æ–µ-—Ä–µ—à–µ–Ω–∏–µ)
3. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
4. [UI/UX –î–∏–∑–∞–π–Ω –∏ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞](#uiux-–¥–∏–∑–∞–π–Ω-–∏-—ç–ª–µ–º–µ–Ω—Ç—ã-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)
5. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
6. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ç–∞–±–ª–∏—Ü)
7. [RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#rls-–ø–æ–ª–∏—Ç–∏–∫–∏-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
8. [–§—É–Ω–∫—Ü–∏–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã](#—Ñ—É–Ω–∫—Ü–∏–∏-–∏-—Ç—Ä–∏–≥–≥–µ—Ä—ã)
9. [API Endpoints](#api-endpoints)
10. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–∏](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-–∏-–∏—Ö-—Ñ—É–Ω–∫—Ü–∏–∏)
11. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ (–°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï)](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ª–æ–∫–∞–ª—å–Ω–æ–π-–≤–µ—Ä—Å–∏–∏-—Å—Ç–∞—Ä–æ–µ-—Ä–µ—à–µ–Ω–∏–µ)
12. [–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö](#–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è-—Å-–±–∞–∑–æ–π-–¥–∞–Ω–Ω—ã—Ö)
13. [–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –¥—Ä—É–≥—É—é –ë–î (–ù–û–í–û–ï –†–ï–®–ï–ù–ò–ï)](#–º–∏–≥—Ä–∞—Ü–∏—è-–Ω–∞-–¥—Ä—É–≥—É—é-–±–¥-–Ω–æ–≤–æ–µ-—Ä–µ—à–µ–Ω–∏–µ)

---

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**Task Manager** - —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –∫–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–æ–º. 

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –¢–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ Next.js 16 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Supabase** –≤ –∫–∞—á–µ—Å—Ç–≤–µ Backend-as-a-Service (BaaS), –Ω–æ —ç—Ç–æ **–°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï**. –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π backend.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –¥–æ—Å–∫–∞ –∑–∞–¥–∞—á —Å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º
- ‚úÖ –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ (—Ä–æ–¥–∏—Ç–µ–ª—å-–ø–æ—Ç–æ–º–æ–∫)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤ (owner, editor, viewer)
- ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ/–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã —Å –∫–æ–¥–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –†–µ–∞–ª—Ç–∞–π–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –ø–æ —Å—Å—ã–ª–∫–∞–º
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–Ω–ª–∞–π–Ω-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á
- ‚úÖ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–¥–∞—á (—á–µ–∫–ª–∏—Å—Ç—ã)

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û: Supabase - —Å—Ç–∞—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–¢–ï–ö–£–©–ò–ô –ü–†–û–ï–ö–¢ –ò–°–ü–û–õ–¨–ó–£–ï–¢ SUPABASE - –≠–¢–û –ù–ï –î–õ–Ø –ù–û–í–û–ì–û –ü–†–û–ï–ö–¢–ê!**

–î–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É **–°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û** –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã.

**–î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω—É—é PostgreSQL/MySQL/MongoDB –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π REST API –∏–ª–∏ GraphQL API
- –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ JWT –∏–ª–∏ —Å–µ—Å—Å–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WebSockets –¥–ª—è realtime —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –•—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª—ã –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∏–ª–∏ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend (–∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞):
- **Next.js 16.0.10** - React —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å App Router
- **React 19.2.0** - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **TypeScript 5** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Tailwind CSS 4.1.9** - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **Radix UI** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI
- **Lucide React** - –∏–∫–æ–Ω–∫–∏
- **React Hook Form + Zod** - —Ñ–æ—Ä–º—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### Backend (–°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï - –ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨):
- ‚ùå **Supabase** - Backend-as-a-Service (–°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï)
  - PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
  - Row Level Security (RLS)
  - Realtime –ø–æ–¥–ø–∏—Å–∫–∏
  - Authentication
  - Storage (–¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤)

### Backend (–ù–û–í–û–ï –†–ï–®–ï–ù–ò–ï - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ):
- ‚úÖ **PostgreSQL/MySQL/MongoDB** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Node.js/Express –∏–ª–∏ NestJS** - REST API
- ‚úÖ **JWT –∏–ª–∏ —Å–µ—Å—Å–∏–∏** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ **WebSockets (Socket.io)** - realtime —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–ª–∏ S3** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
- **@supabase/ssr** - —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- **@supabase/supabase-js** - –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **date-fns** - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
- **sonner** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## UI/UX –î–∏–∑–∞–π–Ω –∏ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **shadcn/ui** (—Å—Ç–∏–ª—å "new-york") –Ω–∞ –±–∞–∑–µ **Radix UI** –∏ **Tailwind CSS**.

### –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞

#### –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (–æ—Å–Ω–æ–≤–Ω–∞—è)

**–§–æ–Ω:**
- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–Ω: `bg-gradient-to-br from-neutral-950 via-zinc-950 to-neutral-900`
- –ö–∞—Ä—Ç–æ—á–∫–∏: `bg-zinc-900/95` —Å `backdrop-blur-xl`
- –ü–∞–Ω–µ–ª–∏: `bg-white/[0.03]` - `bg-white/[0.08]`

**–¢–µ–∫—Å—Ç:**
- –û—Å–Ω–æ–≤–Ω–æ–π: `text-white`
- –í—Ç–æ—Ä–∏—á–Ω—ã–π: `text-white/60` - `text-white/70`
- –ü—Ä–∏–≥–ª—É—à–µ–Ω–Ω—ã–π: `text-white/40` - `text-white/50`

**–ì—Ä–∞–Ω–∏—Ü—ã:**
- –û—Å–Ω–æ–≤–Ω—ã–µ: `border-white/[0.08]` - `border-white/[0.12]`
- –ê–∫—Ç–∏–≤–Ω—ã–µ: `border-white/[0.20]`

**–¶–≤–µ—Ç–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–¥–∞—á:**
- `todo` (–ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é): `bg-gray-400`, `text-gray-300`, `border-gray-500/30`
- `in_progress` (–í —Ä–∞–±–æ—Ç–µ): `bg-amber-500`, `text-amber-300`, `border-amber-500/30`
- `completed` (–ó–∞–≤–µ—Ä—à–µ–Ω–æ): `bg-green-500`, `text-green-300`, `border-green-500/30`
- `blocked` (–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ): `bg-red-500`, `text-red-300`, `border-red-500/30`

**–ê–∫—Ü–µ–Ω—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞:**
- Primary: `bg-blue-500`, `text-blue-400`
- Success: `bg-emerald-500`, `text-emerald-400`
- Warning: `bg-amber-500`, `text-amber-400`
- Danger: `bg-red-500`, `text-red-400`

**–ü–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤ –∑–∞–¥–∞—á:**
```typescript
const BASE_COLORS = [
  { name: "gray", base: "107, 114, 128" },
  { name: "red", base: "239, 68, 68" },
  { name: "orange", base: "249, 115, 22" },
  { name: "yellow", base: "234, 179, 8" },
  { name: "green", base: "34, 197, 94" },
  { name: "teal", base: "20, 184, 166" },
  { name: "blue", base: "59, 130, 246" },
  { name: "purple", base: "168, 85, 247" },
  { name: "pink", base: "236, 72, 153" },
]
```

### –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞

**–®—Ä–∏—Ñ—Ç—ã:**
- –û—Å–Ω–æ–≤–Ω–æ–π: `Geist`, `Geist Fallback` (sans-serif)
- –ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π: `Geist Mono`, `Geist Mono Fallback` (monospace)

**–†–∞–∑–º–µ—Ä—ã:**
- –ó–∞–≥–æ–ª–æ–≤–∫–∏: `text-2xl`, `text-xl`, `text-lg` —Å `font-semibold` –∏–ª–∏ `font-bold`
- –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç: `text-sm`, `text-base`
- –ú–µ–ª–∫–∏–π —Ç–µ–∫—Å—Ç: `text-xs`
- –¢—Ä–µ–∫–∏–Ω–≥: `tracking-tight` –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

**–°—Ç–∏–ª–∏:**
- –ñ–∏—Ä–Ω—ã–π: `font-bold`, `font-semibold`
- –°—Ä–µ–¥–Ω–∏–π: `font-medium`
- –û–±—ã—á–Ω—ã–π: `font-normal`

### –≠—Ñ—Ñ–µ–∫—Ç—ã –∏ —Å—Ç–∏–ª–∏

#### Glass Card (—Å—Ç–µ–∫–ª—è–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞)

```css
.glass-card {
  backdrop-blur-xl;
  bg-white/5;
  border border-white/10;
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ö–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–¥–∞—á
- –î–∏–∞–ª–æ–≥–∏
- –ü–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

#### –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã

**–§–æ–Ω –¥–æ—Å–∫–∏:**
```css
bg-gradient-to-br from-neutral-950 via-zinc-950 to-neutral-900
```

**–ö–Ω–æ–ø–∫–∏:**
```css
bg-gradient-to-r from-blue-500 to-cyan-500
hover:from-blue-600 hover:to-cyan-600
```

#### Backdrop Blur

- `backdrop-blur-xl` - –æ—Å–Ω–æ–≤–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç —Ä–∞–∑–º—ã—Ç–∏—è
- `backdrop-blur-2xl` - —É—Å–∏–ª–µ–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

#### –¢–µ–Ω–∏

- `shadow-lg` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–µ–Ω—å
- `shadow-2xl` - —É—Å–∏–ª–µ–Ω–Ω–∞—è —Ç–µ–Ω—å –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- `shadow-emerald-500/25` - —Ü–≤–µ—Ç–Ω–∞—è —Ç–µ–Ω—å –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤

### UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. –ö–Ω–æ–ø–∫–∏ (Button)

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
- Primary: `bg-gradient-to-r from-blue-500 to-cyan-500`
- Ghost: `bg-transparent hover:bg-white/[0.06]`
- Outline: `border border-white/[0.12] bg-white/[0.04]`
- Destructive: `bg-red-500/[0.12] border-red-500/30 text-red-400`

**–†–∞–∑–º–µ—Ä—ã:**
- Small: `h-7`, `px-2`, `text-xs`
- Default: `h-9`, `px-4`, `text-sm`
- Large: `h-11`, `px-6`, `text-base`

**–ü—Ä–∏–º–µ—Ä:**
```tsx
<Button className="rounded-xl bg-gradient-to-r from-blue-500 to-cyan-500 py-6 text-base font-semibold text-white hover:from-blue-600 hover:to-cyan-600">
  –í–æ–π—Ç–∏
</Button>
```

#### 2. –ö–∞—Ä—Ç–æ—á–∫–∏ (Card)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```tsx
<div className="glass-card rounded-2xl border border-white/10 bg-white/5 p-6">
  {/* –ö–æ–Ω—Ç–µ–Ω—Ç */}
</div>
```

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
- –ü—Ä–æ–µ–∫—Ç: `rounded-2xl border border-border bg-card p-6`
- –ó–∞–¥–∞—á–∞: `glass-card rounded-2xl border backdrop-blur-xl`
- –ü—Ä–æ—Ñ–∏–ª—å: `rounded-3xl border border-white/10 bg-white/5 p-8 backdrop-blur-xl`

#### 3. –ü–æ–ª—è –≤–≤–æ–¥–∞ (Input)

**–°—Ç–∏–ª–∏:**
```tsx
<Input
  className="rounded-xl border-white/10 bg-white/5 text-white placeholder:text-white/40 focus:border-white/20 focus:ring-white/20"
/>
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω: `bg-white/5`
- –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞: `border-white/10`
- –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä: `placeholder:text-white/40`
- –§–æ–∫—É—Å: `focus:border-white/20 focus:ring-white/20`

#### 4. –î–∏–∞–ª–æ–≥–∏ (Dialog)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```tsx
<DialogContent className="border-white/[0.12] bg-zinc-900/98 backdrop-blur-2xl sm:max-w-[440px]">
  <DialogHeader>
    <DialogTitle className="text-lg font-semibold text-white">–ó–∞–≥–æ–ª–æ–≤–æ–∫</DialogTitle>
    <DialogDescription className="text-sm text-white/60">–û–ø–∏—Å–∞–Ω–∏–µ</DialogDescription>
  </DialogHeader>
  {/* –ö–æ–Ω—Ç–µ–Ω—Ç */}
</DialogContent>
```

**–°—Ç–∏–ª–∏:**
- –§–æ–Ω: `bg-zinc-900/98` —Å `backdrop-blur-2xl`
- –ì—Ä–∞–Ω–∏—Ü–∞: `border-white/[0.12]`
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: `text-white`
- –û–ø–∏—Å–∞–Ω–∏–µ: `text-white/60`

#### 5. –í—ã–ø–∞–¥–∞—é—â–∏–µ –º–µ–Ω—é (Dropdown)

**–°—Ç–∏–ª–∏:**
```tsx
<DropdownMenuContent className="w-64 border-white/10 bg-slate-900/95 backdrop-blur-xl">
  <DropdownMenuItem className="flex items-center gap-3 px-3 py-2">
    {/* –≠–ª–µ–º–µ–Ω—Ç */}
  </DropdownMenuItem>
</DropdownMenuContent>
```

#### 6. –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ (Switch)

**–°—Ç–∏–ª–∏:**
- –ê–∫—Ç–∏–≤–Ω—ã–π: `bg-emerald-500`
- –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π: `bg-white/[0.08]`

#### 7. Badge (–∑–Ω–∞—á–∫–∏)

**–ü—Ä–∏–º–µ—Ä—ã:**
```tsx
{/* –ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç */}
<span className="flex items-center gap-1.5 rounded-full bg-emerald-500/[0.15] px-3 py-1.5 text-xs font-medium text-emerald-400 ring-1 ring-emerald-500/20">
  <Globe className="h-3 w-3" />
  –ü—É–±–ª–∏—á–Ω—ã–π
</span>

{/* –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä */}
<span className="flex items-center gap-1.5 rounded-full bg-amber-500/[0.15] px-3 py-1.5 text-xs font-medium text-amber-400 ring-1 ring-amber-500/20">
  <Lock className="h-3 w-3" />
  –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä
</span>
```

### –†–∞–¥–∏—É—Å—ã —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è

- –ú–∞–ª–µ–Ω—å–∫–∏–π: `rounded-lg` (0.5rem)
- –°—Ä–µ–¥–Ω–∏–π: `rounded-xl` (0.75rem)
- –ë–æ–ª—å—à–æ–π: `rounded-2xl` (1rem)
- –û—á–µ–Ω—å –±–æ–ª—å—à–æ–π: `rounded-3xl` (1.5rem)
- –ü–æ–ª–Ω—ã–π –∫—Ä—É–≥: `rounded-full`

### –û—Ç—Å—Ç—É–ø—ã –∏ —Ä–∞–∑–º–µ—Ä—ã

**–û—Ç—Å—Ç—É–ø—ã:**
- –ú–∞–ª–µ–Ω—å–∫–∏–µ: `p-1`, `p-2`, `p-3`
- –°—Ä–µ–¥–Ω–∏–µ: `p-4`, `p-5`, `p-6`
- –ë–æ–ª—å—à–∏–µ: `p-8`

**–ü—Ä–æ–º–µ–∂—É—Ç–∫–∏:**
- –ú–∞–ª–µ–Ω—å–∫–∏–µ: `gap-1`, `gap-2`, `gap-3`
- –°—Ä–µ–¥–Ω–∏–µ: `gap-4`, `gap-5`, `gap-6`
- –ë–æ–ª—å—à–∏–µ: `gap-8`, `gap-12`

**–í—ã—Å–æ—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤:**
- –ú–∞–ª–µ–Ω—å–∫–∏–µ: `h-7`, `h-8`, `h-9`
- –°—Ä–µ–¥–Ω–∏–µ: `h-10`, `h-12`
- –ë–æ–ª—å—à–∏–µ: `h-14`, `h-16`

### –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã

**–ü–µ—Ä–µ—Ö–æ–¥—ã:**
```css
transition-all duration-200
transition-colors
transition-opacity
```

**Hover —ç—Ñ—Ñ–µ–∫—Ç—ã:**
- –ú–∞—Å—à—Ç–∞–±: `hover:scale-105`, `hover:scale-110`
- –§–æ–Ω: `hover:bg-white/[0.06]`, `hover:bg-white/[0.08]`
- –¢–µ–∫—Å—Ç: `hover:text-white`, `hover:text-white/70`

**–ê–Ω–∏–º–∞—Ü–∏–∏:**
- –í—Ä–∞—â–µ–Ω–∏–µ: `animate-spin` (–¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏)
- –ü—É–ª—å—Å–∞—Ü–∏—è: `animate-pulse`
- –ü–æ—è–≤–ª–µ–Ω–∏–µ: `transition-all duration-300 ease-out`

### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

**Breakpoints (Tailwind):**
- `sm:` - 640px –∏ –≤—ã—à–µ
- `md:` - 768px –∏ –≤—ã—à–µ
- `lg:` - 1024px –∏ –≤—ã—à–µ
- `xl:` - 1280px –∏ –≤—ã—à–µ

**–ü—Ä–∏–º–µ—Ä—ã:**
```tsx
{/* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ */}
<div className="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">

{/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã */}
<input className="h-14 w-12 sm:h-16 sm:w-14" />
```

### UX –ü–∞—Ç—Ç–µ—Ä–Ω—ã

#### 1. –î–æ—Å–∫–∞ –∑–∞–¥–∞—á (Task Board)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –∫–∞–Ω–≤–∞—Å —Å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º (0.3x - 2.0x)
- –ü–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ: Space + –º—ã—à—å –∏–ª–∏ —Å—Ä–µ–¥–Ω—è—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏
- –°–µ—Ç–∫–∞: `GRID_SIZE = 20px` —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ —Å–µ—Ç–∫–µ
- –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é (–ø—Ä–∞–≤—ã–π –∫–ª–∏–∫)

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–¥–∞—á (resize)
- –í—ã–±–æ—Ä –∑–∞–¥–∞—á–∏ (–∫–ª–∏–∫)
- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–∫–ª–∏–∫ –Ω–∞ –∞–≤–∞—Ç–∞—Ä)

#### 2. –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞—á–∏ (Task Node)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏] [üë§]   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–¥–∞—á–∏]      ‚îÇ
‚îÇ  - –ü—É–Ω–∫—Ç 1              ‚îÇ
‚îÇ  - –ü—É–Ω–∫—Ç 2              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–°–æ—Å—Ç–æ—è–Ω–∏—è:**
- –û–±—ã—á–Ω–æ–µ: –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
- –í—ã–±—Ä–∞–Ω–Ω–æ–µ: —è—Ä–∫–∞—è –≥—Ä–∞–Ω–∏—Ü–∞, —Ç–µ–Ω—å, —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π z-index
- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ: –∫—É—Ä—Å–æ—Ä `grabbing`

**–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:**
- –ì—Ä–∞–Ω–∏—Ü–∞: `rgba(${taskColor}, 0.4)` - `rgba(${taskColor}, 0.7)`
- –§–æ–Ω: `linear-gradient(135deg, rgba(${taskColor}, 0.1) 0%, rgba(${taskColor}, 0.05) 100%)`
- –¢–µ–Ω—å: `0 4px 16px rgba(0, 0, 0, 0.4)` - `0 8px 32px rgba(${taskColor}, 0.2)`

#### 3. –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –°–ª–µ–≤–∞, –≤—ã–¥–≤–∏–∂–Ω–∞—è –ø–∞–Ω–µ–ª—å

**–§—É–Ω–∫—Ü–∏–∏:**
- –§–∏–ª—å—Ç—Ä –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º
- –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- –§–∏–ª—å—Ç—Ä –ø–æ –¥–µ–¥–ª–∞–π–Ω–∞–º
- –û—á–∏—Å—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–°—Ç–∏–ª–∏:**
- –§–æ–Ω: `bg-zinc-900/95 backdrop-blur-xl`
- –®–∏—Ä–∏–Ω–∞: `320px` (–æ—Ç–∫—Ä—ã—Ç–∞), `48px` (–∑–∞–∫—Ä—ã—Ç–∞)
- –ê–Ω–∏–º–∞—Ü–∏—è: `transition-all duration-300 ease-out`

#### 4. –§–æ—Ä–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–°—Ç–∏–ª–∏:**
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: `glass-card rounded-3xl border border-white/10 bg-white/5 p-8 backdrop-blur-xl`
- –ü–æ–ª—è: `rounded-xl border-white/10 bg-white/5`
- –ö–Ω–æ–ø–∫–∏: `bg-gradient-to-r from-blue-500 to-cyan-500`

**UX:**
- –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤–æ–º –ø–æ–ª–µ
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ –ø–∞—Ä–æ–ª—è
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

#### 5. –°–µ—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```tsx
<div className="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
  {/* –ö–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ */}
</div>
```

**–ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:**
- Hover —ç—Ñ—Ñ–µ–∫—Ç: `hover:border-primary/50 hover:shadow-lg hover:shadow-primary/5`
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: –∞–≤–∞—Ç–∞—Ä—ã –≤ —É–≥–ª—É
- –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞

#### 6. –û–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å

**–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä:**
- –ó–µ–ª–µ–Ω—ã–π –∫—Ä—É–≥: `bg-green-500` —Å `border-2 border-slate-900`
- –†–∞–∑–º–µ—Ä: `h-2.5 w-2.5`
- –ü–æ–∑–∏—Ü–∏—è: `absolute bottom-0 right-0`

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ —á–µ—Ä–µ–∑ `updatePresence()`

### –ò–∫–æ–Ω–∫–∏

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** Lucide React

**–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∫–æ–Ω–∫–∏:**
- `ArrowLeft` - –Ω–∞–∑–∞–¥
- `Edit2` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `Check` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- `Globe` - –ø—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
- `Lock` - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
- `Filter` - —Ñ–∏–ª—å—Ç—Ä—ã
- `Users` - —É—á–∞—Å—Ç–Ω–∏–∫–∏
- `Settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `Trash2` - —É–¥–∞–ª–µ–Ω–∏–µ
- `Plus` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
- `X` - –∑–∞–∫—Ä—ã—Ç–∏–µ
- `ChevronDown/Up` - —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ/—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ

**–†–∞–∑–º–µ—Ä—ã:**
- –ú–∞–ª–µ–Ω—å–∫–∏–µ: `h-3 w-3`, `h-3.5 w-3.5`
- –°—Ä–µ–¥–Ω–∏–µ: `h-4 w-4`, `h-5 w-5`
- –ë–æ–ª—å—à–∏–µ: `h-6 w-6`

### –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

**–°–ø–∏–Ω–Ω–µ—Ä:**
```tsx
<div className="h-4 w-4 animate-spin rounded-full border-2 border-white/20 border-t-white" />
```

**–¢–µ–∫—Å—Ç:**
```tsx
<p className="flex items-center gap-2 text-sm text-muted-foreground">
  <Loader2 className="h-4 w-4 animate-spin" />
  –ó–∞–≥—Ä—É–∑–∫–∞...
</p>
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Toast)

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** Sonner

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```tsx
import { toast } from "sonner"

toast.success("–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω!")
toast.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏")
toast.info("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")
```

### –ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
1. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: `<img src={avatar_image} className="rounded-full" />`
2. –ò–Ω–∏—Ü–∏–∞–ª: `<div style={{backgroundColor: avatar_color}}>{display_name[0]}</div>`

**–°—Ç–∏–ª–∏:**
- –†–∞–∑–º–µ—Ä—ã: `h-6 w-6`, `h-7 w-7`, `h-12 w-12`
- –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ: `rounded-full`
- –ì—Ä–∞–Ω–∏—Ü–∞: `border-2 border-card` –∏–ª–∏ `ring-2 ring-white/70`

### –ö–æ–¥—ã –¥–æ—Å—Ç—É–ø–∞

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:**
```tsx
<div className="flex flex-1 items-center justify-center gap-1.5 rounded-xl border border-blue-500/30 bg-blue-500/[0.15] p-3.5">
  {code.split("").map((char, index) => (
    <span key={index} className="text-xl font-bold tracking-wider text-white">
      {char}
    </span>
  ))}
</div>
```

**–í–≤–æ–¥:**
- 8 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- –ê–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –ø–æ–ª—é
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å—Ç–∞–≤–∫–∏ –∏–∑ –±—É—Ñ–µ—Ä–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

**–ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:**
- –°—Ç–µ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: `flex-col` –≤–º–µ—Å—Ç–æ `flex-row`
- –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã: `p-4` –≤–º–µ—Å—Ç–æ `p-6`
- –ü–æ–ª–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏: `w-full`
- –°–∫—Ä—ã—Ç–∏–µ –≤—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤: `hidden sm:block`

**–ü–ª–∞–Ω—à–µ—Ç—ã:**
- 2 –∫–æ–ª–æ–Ω–∫–∏ –≤–º–µ—Å—Ç–æ 4: `lg:grid-cols-2`
- –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —Ñ–æ—Ä–º—ã

**–î–µ—Å–∫—Ç–æ–ø:**
- –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- 4 –∫–æ–ª–æ–Ω–∫–∏ –≤ —Å–µ—Ç–∫–µ –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ë–æ–∫–æ–≤—ã–µ –ø–∞–Ω–µ–ª–∏

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```
auth.users (Supabase Auth)
    ‚Üì
public.profiles
    ‚Üì
public.projects ‚Üê‚Üí public.project_members
    ‚Üì
public.tasks
    ‚îú‚îÄ‚îÄ task_content_items
    ‚îî‚îÄ‚îÄ task_connections
public.project_invites
public.online_users
```

### –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏:

1. **profiles** ‚Üí `id` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ `auth.users(id)`
2. **projects** ‚Üí `owner_id` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ `auth.users(id)`
3. **project_members** ‚Üí —Å–≤—è–∑—ã–≤–∞–µ—Ç `projects` –∏ `auth.users`
4. **tasks** ‚Üí `project_id` ‚Üí `projects`, `owner_id` ‚Üí `auth.users`, `assignee_id` ‚Üí `auth.users`, `parent_id` ‚Üí `tasks` (—Å–∞–º–æ—Å—Å—ã–ª–∫–∞)
5. **task_content_items** ‚Üí `task_id` ‚Üí `tasks`
6. **task_connections** ‚Üí `from_task_id` –∏ `to_task_id` ‚Üí `tasks`
7. **project_invites** ‚Üí `project_id` ‚Üí `projects`
8. **online_users** ‚Üí `user_id` ‚Üí `auth.users`, `project_id` ‚Üí `projects`

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

### 1. `public.profiles`

–ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| `id` | UUID | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | PRIMARY KEY, FK ‚Üí auth.users(id) |
| `display_name` | TEXT | –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è | NOT NULL |
| `avatar_color` | TEXT | –¶–≤–µ—Ç –∞–≤–∞—Ç–∞—Ä–∞ (hex) | DEFAULT '#ef4444' |
| `avatar_image` | TEXT | Base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ | NULL |
| `created_at` | TIMESTAMPTZ | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | DEFAULT now() |

**RLS –ø–æ–ª–∏—Ç–∏–∫–∏ (–°–¢–ê–†–û–ï - Supabase):**
- `profiles_select_own` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
- `profiles_insert_own` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
- `profiles_update_own` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å

**–î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:** –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ Backend API:
```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–æ—Ñ–∏–ª—é
if (req.user.id !== profileId && !isProjectMember(profileId, req.user.id)) {
  return res.status(403).json({ error: 'Access denied' });
}
```

**–¢—Ä–∏–≥–≥–µ—Ä (–°–¢–ê–†–û–ï - Supabase):**
- `on_auth_user_created` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:** –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –≤ API endpoint —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
```typescript
router.post('/register', async (req, res) => {
  // –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const user = await createUser(req.body);
  // –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
  await createProfile(user.id, req.body.displayName);
});
```

---

### 2. `public.projects`

–ü—Ä–æ–µ–∫—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| `id` | UUID | ID –ø—Ä–æ–µ–∫—Ç–∞ | PRIMARY KEY, DEFAULT gen_random_uuid() |
| `name` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ | NOT NULL |
| `owner_id` | UUID | ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ | NOT NULL, FK ‚Üí auth.users(id) |
| `is_public` | BOOLEAN | –ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç | DEFAULT false |
| `access_code` | TEXT | 8-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞ | UNIQUE, NULL –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö |
| `created_at` | TIMESTAMPTZ | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | DEFAULT now() |
| `updated_at` | TIMESTAMPTZ | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | DEFAULT now() |

**RLS –ø–æ–ª–∏—Ç–∏–∫–∏ (–°–¢–ê–†–û–ï - Supabase):**
- `projects_select_own` - –≤–ª–∞–¥–µ–ª–µ—Ü –≤–∏–¥–∏—Ç —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã
- `projects_select_member` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç –ø—Ä–æ–µ–∫—Ç—ã –≥–¥–µ —Å–æ—Å—Ç–æ—è—Ç
- `projects_select_public` - –≤—Å–µ –≤–∏–¥—è—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
- `projects_insert_own` - –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã
- `projects_update_own` - –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–æ–µ–∫—Ç—ã
- `projects_delete_own` - –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å –ø—Ä–æ–µ–∫—Ç—ã

**–î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:** –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ Backend API:
```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–æ–µ–∫—Ç—É
async function checkProjectAccess(projectId, userId) {
  const project = await db.query(
    'SELECT owner_id, is_public FROM projects WHERE id = $1',
    [projectId]
  );
  
  if (project.rows[0].owner_id === userId) return 'owner';
  
  const member = await db.query(
    'SELECT role FROM project_members WHERE project_id = $1 AND user_id = $2',
    [projectId, userId]
  );
  
  if (member.rows.length > 0) return member.rows[0].role;
  if (project.rows[0].is_public) return 'viewer';
  
  return null; // –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞
}
```

**–¢—Ä–∏–≥–≥–µ—Ä—ã (–°–¢–ê–†–û–ï - Supabase):**
- `on_project_created` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ `project_members` —Å —Ä–æ–ª—å—é 'owner'
- `trigger_auto_generate_access_code` - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

**–î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:** –†–µ–∞–ª–∏–∑—É–π—Ç–µ –≤ API endpoint:
```typescript
router.post('/projects', authenticateToken, async (req, res) => {
  const project = await db.query(
    'INSERT INTO projects (name, owner_id, is_public) VALUES ($1, $2, $3) RETURNING *',
    [req.body.name, req.user.id, req.body.isPublic]
  );
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞
  await db.query(
    'INSERT INTO project_members (project_id, user_id, role) VALUES ($1, $2, $3)',
    [project.rows[0].id, req.user.id, 'owner']
  );
  
  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
  if (req.body.isPublic) {
    const code = generateAccessCode();
    await db.query(
      'UPDATE projects SET access_code = $1 WHERE id = $2',
      [code, project.rows[0].id]
    );
  }
  
  res.json(project.rows[0]);
});
```

**–§—É–Ω–∫—Ü–∏–∏ (–°–¢–ê–†–û–ï - Supabase):**
- `generate_access_code()` - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π 8-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥

**–î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:** –†–µ–∞–ª–∏–∑—É–π—Ç–µ –≤ Backend:
```typescript
function generateAccessCode(): string {
  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  let result = '';
  for (let i = 0; i < 8; i++) {
    result += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return result;
}
```

---

### 3. `public.project_members`

–£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| `id` | UUID | ID –∑–∞–ø–∏—Å–∏ | PRIMARY KEY, DEFAULT gen_random_uuid() |
| `project_id` | UUID | ID –ø—Ä–æ–µ–∫—Ç–∞ | NOT NULL, FK ‚Üí projects(id) |
| `user_id` | UUID | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | NOT NULL, FK ‚Üí auth.users(id) |
| `role` | TEXT | –†–æ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ | NOT NULL, CHECK ('owner', 'editor', 'viewer') |
| `joined_at` | TIMESTAMPTZ | –î–∞—Ç–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è | DEFAULT now() |
| UNIQUE | (project_id, user_id) | –£–Ω–∏–∫–∞–ª—å–Ω–∞—è –ø–∞—Ä–∞ | - |

**RLS –ø–æ–ª–∏—Ç–∏–∫–∏:**
- `project_members_select` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç –≤—Å–µ—Ö –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö –≥–¥–µ —Å–æ—Å—Ç–æ—è—Ç
- `project_members_insert_owner` - –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- `project_members_delete_owner` - –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
- `add_owner_as_member()` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

---

### 4. `public.tasks`

–ó–∞–¥–∞—á–∏ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| `id` | UUID | ID –∑–∞–¥–∞—á–∏ | PRIMARY KEY, DEFAULT gen_random_uuid() |
| `project_id` | UUID | ID –ø—Ä–æ–µ–∫—Ç–∞ | NOT NULL, FK ‚Üí projects(id) |
| `parent_id` | UUID | ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∑–∞–¥–∞—á–∏ | NULL, FK ‚Üí tasks(id) |
| `title` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ | NOT NULL |
| `description` | TEXT | –û–ø–∏—Å–∞–Ω–∏–µ | NULL |
| `owner_id` | UUID | ID —Å–æ–∑–¥–∞—Ç–µ–ª—è | NOT NULL, FK ‚Üí auth.users(id) |
| `assignee_id` | UUID | ID –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è | NULL, FK ‚Üí auth.users(id) |
| `status` | TEXT | –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ | NOT NULL, DEFAULT 'todo', CHECK ('todo', 'in_progress', 'completed', 'blocked') |
| `deadline` | TIMESTAMPTZ | –î–µ–¥–ª–∞–π–Ω | NULL |
| `position_x` | INTEGER | X –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–∞ –¥–æ—Å–∫–µ | NOT NULL, DEFAULT 0 |
| `position_y` | INTEGER | Y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–∞ –¥–æ—Å–∫–µ | NOT NULL, DEFAULT 0 |
| `has_content` | BOOLEAN | –ï—Å—Ç—å –ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ | DEFAULT false |
| `color` | TEXT | –¶–≤–µ—Ç –∑–∞–¥–∞—á–∏ (RGB) | DEFAULT '107, 114, 128' |
| `created_at` | TIMESTAMPTZ | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | DEFAULT now() |
| `updated_at` | TIMESTAMPTZ | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | DEFAULT now() |

**RLS –ø–æ–ª–∏—Ç–∏–∫–∏:**
- `tasks_select_project_member` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç –∑–∞–¥–∞—á–∏ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö
- `tasks_insert_project_member` - —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–¥–∞—á–∏
- `tasks_update_project_member` - —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –∑–∞–¥–∞—á–∏
- `tasks_delete_project_member` - —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å –∑–∞–¥–∞—á–∏

---

### 5. `public.task_content_items`

–≠–ª–µ–º–µ–Ω—Ç—ã —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∑–∞–¥–∞—á (—á–µ–∫–ª–∏—Å—Ç—ã).

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| `id` | UUID | ID —ç–ª–µ–º–µ–Ω—Ç–∞ | PRIMARY KEY, DEFAULT gen_random_uuid() |
| `task_id` | UUID | ID –∑–∞–¥–∞—á–∏ | NOT NULL, FK ‚Üí tasks(id) |
| `content` | TEXT | –¢–µ–∫—Å—Ç —ç–ª–µ–º–µ–Ω—Ç–∞ | NOT NULL |
| `position` | INTEGER | –ü–æ–∑–∏—Ü–∏—è –≤ —Å–ø–∏—Å–∫–µ | NOT NULL, DEFAULT 0 |
| `completed` | BOOLEAN | –í—ã–ø–æ–ª–Ω–µ–Ω–æ | DEFAULT false |
| `created_at` | TIMESTAMPTZ | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | DEFAULT now() |
| `updated_at` | TIMESTAMPTZ | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | DEFAULT now() |

**RLS –ø–æ–ª–∏—Ç–∏–∫–∏:**
- `task_content_items_select` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–¥–∞—á
- `task_content_items_insert` - —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã
- `task_content_items_update` - —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã
- `task_content_items_delete` - —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã

---

### 6. `public.task_connections`

–°–≤—è–∑–∏ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏ (–≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ –Ω–∞ –¥–æ—Å–∫–µ).

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| `id` | UUID | ID —Å–≤—è–∑–∏ | PRIMARY KEY, DEFAULT gen_random_uuid() |
| `from_task_id` | UUID | ID –∏—Å—Ö–æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏ | NOT NULL, FK ‚Üí tasks(id) |
| `to_task_id` | UUID | ID —Ü–µ–ª–µ–≤–æ–π –∑–∞–¥–∞—á–∏ | NOT NULL, FK ‚Üí tasks(id) |
| `project_id` | UUID | ID –ø—Ä–æ–µ–∫—Ç–∞ | NOT NULL, FK ‚Üí projects(id) |
| `created_at` | TIMESTAMPTZ | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | DEFAULT now() |

**–ò–Ω–¥–µ–∫—Å—ã:**
- `idx_task_connections_from` - –Ω–∞ `from_task_id`
- `idx_task_connections_to` - –Ω–∞ `to_task_id`
- `idx_task_connections_project` - –Ω–∞ `project_id`

**RLS –ø–æ–ª–∏—Ç–∏–∫–∏:**
- `task_connections_select_project_member` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç —Å–≤—è–∑–∏
- `task_connections_insert_project_member` - —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤—è–∑–∏
- `task_connections_delete_project_member` - —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å —Å–≤—è–∑–∏

---

### 7. `public.project_invites`

–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ —Å—Å—ã–ª–∫–∞–º.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| `id` | UUID | ID –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è | PRIMARY KEY, DEFAULT gen_random_uuid() |
| `project_id` | UUID | ID –ø—Ä–æ–µ–∫—Ç–∞ | NOT NULL, FK ‚Üí projects(id) |
| `invite_token` | TEXT | –¢–æ–∫–µ–Ω –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è | UNIQUE, NOT NULL |
| `created_by` | UUID | ID —Å–æ–∑–¥–∞—Ç–µ–ª—è | NOT NULL, FK ‚Üí auth.users(id) |
| `expires_at` | TIMESTAMPTZ | –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è | DEFAULT now() + 7 days |
| `created_at` | TIMESTAMPTZ | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è | DEFAULT now() |

**RLS –ø–æ–ª–∏—Ç–∏–∫–∏:**
- `project_invites_select_member` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- `project_invites_insert_member` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

---

### 8. `public.online_users`

–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|------|-----|----------|-------------|
| `user_id` | UUID | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | PRIMARY KEY, FK ‚Üí auth.users(id) |
| `project_id` | UUID | ID –ø—Ä–æ–µ–∫—Ç–∞ | PRIMARY KEY, FK ‚Üí projects(id) |
| `last_seen` | TIMESTAMPTZ | –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | DEFAULT now() |

**RLS –ø–æ–ª–∏—Ç–∏–∫–∏:**
- `online_users_select` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å
- `online_users_insert_own` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å
- `online_users_update_own` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å
- `online_users_delete_own` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å

**–§—É–Ω–∫—Ü–∏–∏:**
- `cleanup_online_users()` - —É–¥–∞–ª—è–µ—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (>5 –º–∏–Ω—É—Ç)

---

## RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï:** RLS (Row Level Security) - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è PostgreSQL, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –≤ Supabase. –≠—Ç–æ **–°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï**. 

**–î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ Supabase
- ‚úÖ –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –≤ Backend API
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –∫–∞–∂–¥–æ–º API endpoint

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã RLS (–¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞):

1. **–í–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–æ–µ–∫—Ç–∞** –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–º—É –ø—Ä–æ–µ–∫—Ç—É
2. **–£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞** (editor/viewer) –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø
3. **–ü—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã** –≤–∏–¥–Ω—ã –≤—Å–µ–º, –Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏
4. **–ü—Ä–æ—Ñ–∏–ª–∏** –≤–∏–¥–Ω—ã —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –æ–±—â–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ (–°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï - —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è):

**–í –Ω–æ–≤–æ–º –ø—Ä–æ–µ–∫—Ç–µ —ç—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ Backend API!**

#### Profiles:
```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
profiles_select_own: auth.uid() = id

-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–æ—Ñ–∏–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ–±—â–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
profiles_select_accessible: —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é get_accessible_user_ids()
```

#### Projects:
```sql
-- –í–ª–∞–¥–µ–ª–µ—Ü –≤–∏–¥–∏—Ç —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã
projects_select_own: owner_id = auth.uid()

-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç –ø—Ä–æ–µ–∫—Ç—ã –≥–¥–µ —Å–æ—Å—Ç–æ—è—Ç
projects_select_member: EXISTS –≤ project_members

-- –í—Å–µ –≤–∏–¥—è—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
projects_select_public: is_public = true
```

#### Tasks:
```sql
-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–∏–¥—è—Ç –∑–∞–¥–∞—á–∏ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö
tasks_select_project_member: EXISTS –≤ project_members

-- –¢–æ–ª—å–∫–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
tasks_update_project_member: role IN ('owner', 'editor')
```

---

## –§—É–Ω–∫—Ü–∏–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã

### 1. `handle_new_user()`
**–¢–∏–ø:** –¢—Ä–∏–≥–≥–µ—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è  
**–°–æ–±—ã—Ç–∏–µ:** AFTER INSERT –Ω–∞ `auth.users`  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```sql
CREATE OR REPLACE FUNCTION public.handle_new_user()
RETURNS TRIGGER AS $$
BEGIN
  INSERT INTO public.profiles (id, display_name, avatar_color)
  VALUES (
    NEW.id,
    COALESCE(NEW.raw_user_meta_data->>'display_name', 
             split_part(NEW.email, '@', 1)),
    COALESCE(NEW.raw_user_meta_data->>'avatar_color', '#ef4444')
  )
  ON CONFLICT (id) DO NOTHING;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;
```

### 2. `add_owner_as_member()`
**–¢–∏–ø:** –¢—Ä–∏–≥–≥–µ—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è  
**–°–æ–±—ã—Ç–∏–µ:** AFTER INSERT –Ω–∞ `projects`  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ `project_members`

```sql
CREATE OR REPLACE FUNCTION public.add_owner_as_member()
RETURNS TRIGGER AS $$
BEGIN
  INSERT INTO public.project_members (project_id, user_id, role)
  VALUES (NEW.id, NEW.owner_id, 'owner')
  ON CONFLICT (project_id, user_id) DO NOTHING;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;
```

### 3. `generate_access_code()`
**–¢–∏–ø:** –§—É–Ω–∫—Ü–∏—è  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π 8-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞

```sql
CREATE OR REPLACE FUNCTION generate_access_code()
RETURNS TEXT AS $$
DECLARE
  chars TEXT := 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  result TEXT := '';
  i INTEGER;
BEGIN
  FOR i IN 1..8 LOOP
    result := result || substr(chars, floor(random() * length(chars) + 1)::int, 1);
  END LOOP;
  RETURN result;
END;
$$ LANGUAGE plpgsql;
```

### 4. `auto_generate_access_code()`
**–¢–∏–ø:** –¢—Ä–∏–≥–≥–µ—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è  
**–°–æ–±—ã—Ç–∏–µ:** BEFORE INSERT OR UPDATE –Ω–∞ `projects`  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### 5. `cleanup_online_users()`
**–¢–∏–ø:** –§—É–Ω–∫—Ü–∏—è  
**–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª—è–µ—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (>5 –º–∏–Ω—É—Ç)

```sql
CREATE OR REPLACE FUNCTION public.cleanup_online_users()
RETURNS void AS $$
BEGIN
  DELETE FROM public.online_users
  WHERE last_seen < now() - interval '5 minutes';
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;
```

---

## API Endpoints

### 1. `POST /api/projects/[projectId]/generate-code`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É–±–ª–∏—á–Ω—ã–º

**–õ–æ–≥–∏–∫–∞:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π 8-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `projects.access_code`
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥

**–û—Ç–≤–µ—Ç:**
```json
{
  "accessCode": "ABC12345"
}
```

### 2. `POST /api/projects/[projectId]/delete-code`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–¥–∞–ª—è–µ—Ç –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–æ–µ–∫—Ç–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –ø—Ä–æ–µ–∫—Ç–∞

**–õ–æ–≥–∏–∫–∞:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `access_code = NULL`
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—Å–ø–µ—Ö

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true
}
```

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–∏

### 1. `TaskBoard` (`components/task-board.tsx`)

**–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ—Å–∫–∏ –∑–∞–¥–∞—á.**

**–§—É–Ω–∫—Ü–∏–∏:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–¥–∞—á –Ω–∞ –∫–∞–Ω–≤–∞—Å–µ
- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á (drag & drop)
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (zoom)
- –ü–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ (pan) - Space + –º—ã—à—å
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á (–ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é, —Å—Ç–∞—Ç—É—Å—É, –¥–µ–¥–ª–∞–π–Ω—É)
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á (–¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é)
- –†–µ–∞–ª—Ç–∞–π–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:**
- `tasks` - –º–∞—Å—Å–∏–≤ –∑–∞–¥–∞—á
- `scale` - –º–∞—Å—à—Ç–∞–± (0.3 - 2.0)
- `offset` - —Å–º–µ—â–µ–Ω–∏–µ –∫–∞–Ω–≤–∞—Å–∞
- `selectedTaskId` - –≤—ã–±—Ä–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞
- `filters` - –∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

**Realtime –ø–æ–¥–ø–∏—Å–∫–∏:**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `tasks` –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `project_members` –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

**–ú–µ—Ç–æ–¥—ã:**
- `handleCreateTask()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `handleUpdateTask()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `handleDeleteTask()` - —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `getFilteredTasks()` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á

---

### 2. `TaskNode` (`components/task-node.tsx`)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –∑–∞–¥–∞—á–∏ –Ω–∞ –¥–æ—Å–∫–µ.**

**–§—É–Ω–∫—Ü–∏–∏:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è
- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –ø–æ –¥–æ—Å–∫–µ
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ (resize)
- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—Å—Ç–∞—Ç—É—Å, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å, —Ü–≤–µ—Ç, –¥–µ–¥–ª–∞–π–Ω)
- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–¥–∞—á–∏ (—á–µ–∫–ª–∏—Å—Ç)
- –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:**
- `isDragging` - –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç—Å—è –ª–∏ –∑–∞–¥–∞—á–∞
- `isExpanded` - –æ—Ç–∫—Ä—ã—Ç–∞ –ª–∏ –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `contentItems` - —ç–ª–µ–º–µ–Ω—Ç—ã —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- `taskColor` - —Ü–≤–µ—Ç –∑–∞–¥–∞—á–∏

**–ú–µ—Ç–æ–¥—ã:**
- `loadContentItems()` - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- `handleAddEmptyContent()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
- `handleUpdateContent()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
- `handleToggleContentComplete()` - –æ—Ç–º–µ—Ç–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `handleColorChange()` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞
- `handleStatusChange()` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

---

### 3. `ProjectsGrid` (`components/projects-grid.tsx`)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–µ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤.**

**–§—É–Ω–∫—Ü–∏–∏:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞
- –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–æ–µ–∫—Ç—É

**–ú–µ—Ç–æ–¥—ã:**
- `handleCreateProject()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- `handleCopyCode()` - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞
- `loadProjectData()` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

---

### 4. `AccessCodeInput` (`components/access-code-input.tsx`)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–≤–æ–¥–∞ –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞.**

**–§—É–Ω–∫—Ü–∏–∏:**
- –í–≤–æ–¥ 8-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –ø–æ–ª—é
- –í—Å—Ç–∞–≤–∫–∞ –∏–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç

**–õ–æ–≥–∏–∫–∞:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å —Ç–∞–∫–∏–º –∫–æ–¥–æ–º
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–º
4. –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ `project_members` —Å —Ä–æ–ª—å—é 'editor'
5. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –¥–æ—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞

---

### 5. `ProjectSettingsDialog` (`components/project-settings-dialog.tsx`)

**–î–∏–∞–ª–æ–≥ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞.**

**–§—É–Ω–∫—Ü–∏–∏:**
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è/—É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞
- –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**–ú–µ—Ç–æ–¥—ã:**
- `handleSave()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `handleGenerateCode()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
- `handleDeleteCode()` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–¥–∞
- `handleDelete()` - —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

---

### 6. `OnlineUsersDropdown` (`components/online-users-dropdown.tsx`)

**–í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –æ–Ω–ª–∞–π–Ω-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.**

**–§—É–Ω–∫—Ü–∏–∏:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–∞
- –£–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏

**Realtime –ø–æ–¥–ø–∏—Å–∫–∏:**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `project_members`
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `online_users`

**–ú–µ—Ç–æ–¥—ã:**
- `loadMembers()` - –∑–∞–≥—Ä—É–∑–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- `loadOnlineUsers()` - –∑–∞–≥—Ä—É–∑–∫–∞ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–∞
- `updatePresence()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
- `removeMember()` - —É–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞
- `generateInviteLink()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

---

### 7. `AssigneeSelector` (`components/assignee-selector.tsx`)

**–°–µ–ª–µ–∫—Ç–æ—Ä –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –∑–∞–¥–∞—á–∏.**

**–§—É–Ω–∫—Ü–∏–∏:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
- –í—ã–±–æ—Ä –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –∑–∞–¥–∞—á–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–æ–≤

**Realtime –ø–æ–¥–ø–∏—Å–∫–∏:**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `project_members`

---

### 8. `ProfileEditorDialog` (`components/profile-editor-dialog.tsx`)

**–î–∏–∞–ª–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è.**

**–§—É–Ω–∫—Ü–∏–∏:**
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏
- –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ (base64)
- –í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞ –∞–≤–∞—Ç–∞—Ä–∞
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ú–µ—Ç–æ–¥—ã:**
- `handleImageUpload()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `handleSave()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ (–°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï)

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï:** –≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø—Ä–æ–µ–∫—Ç–∞ —Å Supabase. –≠—Ç–æ **–°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï**. –î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–¥–µ–ª ["–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –¥—Ä—É–≥—É—é –ë–î"](#–º–∏–≥—Ä–∞—Ü–∏—è-–Ω–∞-–¥—Ä—É–≥—É—é-–±–¥-–Ω–æ–≤–æ–µ-—Ä–µ—à–µ–Ω–∏–µ).

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js (–≤–µ—Ä—Å–∏—è 18+)
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pnpm
npm install -g pnpm

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
git clone <repository-url>
cd task-manager-interface20

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –ª–æ–∫–∞–ª—å–Ω–æ

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Supabase CLI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Supabase CLI
npm install -g supabase

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
supabase init

# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Supabase
supabase start
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- PostgreSQL URL: `postgresql://postgres:postgres@localhost:54322/postgres`
- API URL: `http://localhost:54321`
- Anon Key: (–±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –≤ –≤—ã–≤–æ–¥–µ)

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker Compose

–°–æ–∑–¥–∞–π—Ç–µ `docker-compose.yml`:

```yaml
version: '3.8'
services:
  postgres:
    image: supabase/postgres:latest
    ports:
      - "54322:5432"
    environment:
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: postgres
    volumes:
      - postgres_data:/var/lib/postgresql/data

  studio:
    image: supabase/studio:latest
    ports:
      - "54323:3000"
    depends_on:
      - postgres
    environment:
      SUPABASE_URL: http://localhost:54321
      SUPABASE_ANON_KEY: <your-anon-key>

volumes:
  postgres_data:
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –≤ –ø–æ—Ä—è–¥–∫–µ:

1. `scripts/001_create_tables.sql` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
2. `scripts/002_add_project_members.sql` - —Ç–∞–±–ª–∏—Ü–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
3. `scripts/003_add_project_visibility.sql` - –ø—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
4. `scripts/003_add_task_content_fields.sql` - —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–¥–∞—á
5. `scripts/004_add_task_connections.sql` - —Å–≤—è–∑–∏ –∑–∞–¥–∞—á
6. `scripts/009_add_access_code.sql` - –∫–æ–¥—ã –¥–æ—Å—Ç—É–ø–∞
7. –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–í–∞–∂–Ω–æ:** –í—ã–ø–æ–ª–Ω—è–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local`:

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=<your-anon-key>

# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
NEXT_PUBLIC_DEV_SUPABASE_REDIRECT_URL=http://localhost:3000/projects
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Authentication

–í Supabase Studio (`http://localhost:54323`):

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Authentication** ‚Üí **Settings**
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **Site URL**: `http://localhost:3000`
3. –î–æ–±–∞–≤—å—Ç–µ **Redirect URLs**: `http://localhost:3000/**`
4. –í–∫–ª—é—á–∏—Ç–µ **Email** –ø—Ä–æ–≤–∞–π–¥–µ—Ä

### –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Storage (–¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤)

–í Supabase Studio:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Storage**
2. –°–æ–∑–¥–∞–π—Ç–µ bucket `avatars` (–ø—É–±–ª–∏—á–Ω—ã–π)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ê–≤–∞—Ç–∞—Ä—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ base64 –≤ `profiles.avatar_image` (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

### –®–∞–≥ 7: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
pnpm dev

# –ü—Ä–æ–¥–∞–∫—à–Ω —Å–±–æ—Ä–∫–∞
pnpm build
pnpm start
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:3000`

---

## –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü–æ—Ç–æ–∫:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É (`/auth/sign-up`)
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `supabase.auth.signUp()`
3. –¢—Ä–∏–≥–≥–µ—Ä `on_auth_user_created` —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ `profiles`
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ `/projects`

**SQL:**
```sql
-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–º
INSERT INTO public.profiles (id, display_name, avatar_color)
VALUES (NEW.id, 'User', '#ef4444');
```

---

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**–ü–æ—Ç–æ–∫:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `supabase.from('projects').insert()`
3. –¢—Ä–∏–≥–≥–µ—Ä `on_project_created` –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ `project_members`
4. –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø—É–±–ª–∏—á–Ω—ã–π, —Ç—Ä–∏–≥–≥–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `access_code`
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ `/board/[projectId]`

**SQL:**
```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
INSERT INTO public.projects (name, owner_id, is_public)
VALUES ('My Project', 'user-id', false);

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–º
INSERT INTO public.project_members (project_id, user_id, role)
VALUES (NEW.id, NEW.owner_id, 'owner');
```

---

### 3. –í—Ö–æ–¥ –ø–æ –∫–æ–¥—É –¥–æ—Å—Ç—É–ø–∞

**–ü–æ—Ç–æ–∫:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç 8-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
2. –ü–æ–∏—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞: `SELECT * FROM projects WHERE access_code = 'CODE' AND is_public = true`
3. –ü—Ä–æ–≤–µ—Ä–∫–∞: —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∏–ª–∏ —É–∂–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–º
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç: `INSERT INTO project_members (project_id, user_id, role) VALUES (...)`
5. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –¥–æ—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞

**SQL:**
```sql
-- –ü–æ–∏—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
SELECT id, name, owner_id, is_public, access_code
FROM projects
WHERE access_code = 'ABC12345' AND is_public = true;

-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞
INSERT INTO public.project_members (project_id, user_id, role)
VALUES ('project-id', 'user-id', 'editor')
ON CONFLICT (project_id, user_id) DO NOTHING;
```

---

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–ü–æ—Ç–æ–∫:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–≤–æ–π–Ω—ã–º –∫–ª–∏–∫–æ–º —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –Ω–∞ –¥–æ—Å–∫–µ
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `supabase.from('tasks').insert()`
3. RLS –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å editor/owner)
4. –ó–∞–¥–∞—á–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –¥–æ—Å–∫–µ
5. Realtime –ø–æ–¥–ø–∏—Å–∫–∞ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**SQL:**
```sql
INSERT INTO public.tasks (
  project_id, parent_id, title, owner_id, 
  assignee_id, status, position_x, position_y, color
)
VALUES (
  'project-id', NULL, 'New Task', 'user-id',
  'user-id', 'todo', 400, 200, '107, 114, 128'
);
```

---

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–ü–æ—Ç–æ–∫:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω—è–µ—Ç –∑–∞–¥–∞—á—É (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å, –ø–æ–∑–∏—Ü–∏—é)
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `supabase.from('tasks').update()`
3. RLS –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
4. –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
5. Realtime –ø–æ–¥–ø–∏—Å–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç UI —É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**SQL:**
```sql
UPDATE public.tasks
SET 
  title = 'Updated Title',
  status = 'in_progress',
  position_x = 500,
  position_y = 300,
  color = '59, 130, 246'
WHERE id = 'task-id';
```

---

### 6. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∑–∞–¥–∞—á–∏

**–ü–æ—Ç–æ–∫:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –∑–∞–¥–∞—á–∏
2. –í—ã–±–∏—Ä–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ"
3. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `task_content_items`
4. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ñ–ª–∞–≥ `tasks.has_content = true`
5. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∑–∞–¥–∞—á–µ

**SQL:**
```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
INSERT INTO public.task_content_items (task_id, content, position, completed)
VALUES ('task-id', '', 0, false);

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞
UPDATE public.tasks
SET has_content = true
WHERE id = 'task-id';
```

---

### 7. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–∞

**–ü–æ—Ç–æ–∫:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç
2. –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `updatePresence()`
3. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `online_users`
4. –î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ Realtime

**SQL:**
```sql
-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
INSERT INTO public.online_users (user_id, project_id, last_seen)
VALUES ('user-id', 'project-id', now())
ON CONFLICT (user_id, project_id)
DO UPDATE SET last_seen = now();

-- –ó–∞–≥—Ä—É–∑–∫–∞ –æ–Ω–ª–∞–π–Ω-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT user_id
FROM public.online_users
WHERE project_id = 'project-id'
  AND last_seen >= now() - interval '5 minutes';
```

---

### 8. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏

**–ü–æ—Ç–æ–∫:**
1. –í–ª–∞–¥–µ–ª–µ—Ü/—Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å"
2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è UUID —Ç–æ–∫–µ–Ω
3. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `project_invites`
4. –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞: `/invite/[token]`
5. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç

**SQL:**
```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
INSERT INTO public.project_invites (project_id, invite_token, created_by, expires_at)
VALUES (
  'project-id',
  'uuid-token',
  'user-id',
  now() + interval '7 days'
);

-- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (–≤ /invite/[token])
SELECT * FROM public.project_invites
WHERE invite_token = 'token' AND expires_at > now();

-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞
INSERT INTO public.project_members (project_id, user_id, role)
VALUES ('project-id', 'user-id', 'editor');
```

---

### 9. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á

**–ü–æ—Ç–æ–∫:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å, —Å—Ç–∞—Ç—É—Å, –¥–µ–¥–ª–∞–π–Ω)
2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
3. –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∑–∞–¥–∞—á–∏
4. –ù–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∑–∞–¥–∞—á–∏ –∑–∞—Ç–µ–º–Ω—è—é—Ç—Å—è

**–õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
```typescript
const filteredTasks = tasks.filter(task => {
  // –ü–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é
  if (filters.assignees.length > 0) {
    if (!task.assignee_id || !filters.assignees.includes(task.assignee_id)) {
      return false;
    }
  }
  
  // –ü–æ —Å—Ç–∞—Ç—É—Å—É
  if (filters.statuses.length > 0) {
    if (!filters.statuses.includes(task.status)) {
      return false;
    }
  }
  
  // –ü–æ –¥–µ–¥–ª–∞–π–Ω—É
  if (filters.deadlineFilter !== 'all' && task.deadline) {
    // –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ–¥–ª–∞–π–Ω–∞
  }
  
  return true;
});
```

---

### 10. Realtime —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

**–ü–æ–¥–ø–∏—Å–∫–∏:**

1. **–ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á:**
```typescript
supabase
  .channel(`task-board-tasks-${projectId}`)
  .on('postgres_changes', {
    event: '*',
    schema: 'public',
    table: 'tasks',
    filter: `project_id=eq.${projectId}`
  }, (payload) => {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ INSERT/UPDATE/DELETE
  })
  .subscribe();
```

2. **–ò–∑–º–µ–Ω–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:**
```typescript
supabase
  .channel(`project-members-${projectId}`)
  .on('postgres_changes', {
    event: '*',
    schema: 'public',
    table: 'project_members',
    filter: `project_id=eq.${projectId}`
  }, (payload) => {
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  })
  .subscribe();
```

3. **–û–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å:**
```typescript
supabase
  .channel(`online-users-${projectId}`)
  .on('postgres_changes', {
    event: '*',
    schema: 'public',
    table: 'online_users',
    filter: `project_id=eq.${projectId}`
  }, (payload) => {
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å–∞
  })
  .subscribe();
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase Realtime

–í Supabase Studio:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Database** ‚Üí **Replication**
2. –í–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –¥–ª—è —Ç–∞–±–ª–∏—Ü:
   - `tasks`
   - `project_members`
   - `online_users`
   - `task_content_items`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ Supabase:
- **Allowed Origins**: `http://localhost:3000`
- **Allowed Methods**: GET, POST, PUT, DELETE, PATCH
- **Allowed Headers**: *

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Email (–¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)

–í Supabase Studio ‚Üí **Authentication** ‚Üí **Email Templates**:
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —à–∞–±–ª–æ–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email
- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email

---

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **RLS –ø–æ–ª–∏—Ç–∏–∫–∏** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.

2. **Realtime –ø–æ–¥–ø–∏—Å–∫–∏** - –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ—Ç–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –æ—Ç –∫–∞–Ω–∞–ª–æ–≤ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

3. **–¢—Ä–∏–≥–≥–µ—Ä—ã** - –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∫–∞—Å–∫–∞–¥–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –ë—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã —Å —Ä–µ–∫—É—Ä—Å–∏–µ–π.

4. **–ö–æ–¥—ã –¥–æ—Å—Ç—É–ø–∞** - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `generate_access_code()`.

5. **–û–Ω–ª–∞–π–Ω-—Å—Ç–∞—Ç—É—Å** - —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

6. **–ê–≤–∞—Ç–∞—Ä—ã** - –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ base64. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Storage.

---

## –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö TypeScript

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (`lib/types.ts`)

```typescript
// –ó–∞–¥–∞—á–∞
interface Task {
  id: string
  project_id: string
  parent_id: string | null
  title: string
  description: string | null
  assignee_id: string | null
  status: string // 'todo' | 'in_progress' | 'completed' | 'blocked'
  deadline: string | null
  position_x: number
  position_y: number
  created_at?: string
  updated_at?: string
  owner_id?: string
  has_content?: boolean
  color?: string // RGB —Ñ–æ—Ä–º–∞—Ç: "107, 114, 128"
}

// –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
interface Profile {
  id: string
  display_name: string
  avatar_color: string
  avatar_image?: string | null // Base64 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
}

// –°–≤—è–∑—å –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏
interface TaskConnection {
  id: string
  from_task_id: string
  to_task_id: string
  project_id: string
  created_at?: string
}

// –≠–ª–µ–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∑–∞–¥–∞—á–∏
interface TaskContentItem {
  id: string
  task_id: string
  content: string
  position: number
  completed?: boolean
  created_at?: string
  updated_at?: string
}

// –£—á–∞—Å—Ç–Ω–∏–∫ –ø—Ä–æ–µ–∫—Ç–∞
interface ProjectMember {
  id: string
  project_id: string
  user_id: string
  role: "owner" | "editor" | "viewer"
  joined_at: string
}
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

```
task-manager-interface20/
‚îú‚îÄ‚îÄ app/                          # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ api/                      # API Routes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ projects/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ [projectId]/
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ generate-code/
‚îÇ   ‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ route.ts
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ delete-code/
‚îÇ   ‚îÇ               ‚îî‚îÄ‚îÄ route.ts
‚îÇ   ‚îú‚îÄ‚îÄ auth/                     # –°—Ç—Ä–∞–Ω–∏—Ü—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sign-up/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sign-up-success/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ board/                    # –î–æ—Å–∫–∞ –∑–∞–¥–∞—á
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [projectId]/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ invite/                   # –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [token]/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ projects/                 # –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                # –ö–æ—Ä–Ω–µ–≤–æ–π layout
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                  # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îî‚îÄ‚îÄ globals.css               # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ
‚îú‚îÄ‚îÄ components/                   # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ ui/                       # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Radix UI)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ access-code-input.tsx    # –í–≤–æ–¥ –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ assignee-selector.tsx    # –í—ã–±–æ—Ä –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ delete-confirmation-dialog.tsx
‚îÇ   ‚îú‚îÄ‚îÄ online-users-dropdown.tsx # –û–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ profile-editor-dialog.tsx # –†–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ profile-header.tsx        # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ project-settings-dialog.tsx # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ projects-grid.tsx         # –°–µ—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ task-board.tsx            # –î–æ—Å–∫–∞ –∑–∞–¥–∞—á
‚îÇ   ‚îî‚îÄ‚îÄ task-node.tsx             # –£–∑–µ–ª –∑–∞–¥–∞—á–∏
‚îÇ
‚îú‚îÄ‚îÄ lib/                          # –£—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ supabase/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.ts             # –ö–ª–∏–µ–Ω—Ç Supabase (–±—Ä–∞—É–∑–µ—Ä)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.ts             # –ö–ª–∏–µ–Ω—Ç Supabase (—Å–µ—Ä–≤–µ—Ä)
‚îÇ   ‚îú‚îÄ‚îÄ types.ts                  # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts                  # –£—Ç–∏–ª–∏—Ç—ã (cn, –∏ —Ç.–¥.)
‚îÇ
‚îú‚îÄ‚îÄ hooks/                         # React —Ö—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ use-mobile.ts
‚îÇ   ‚îî‚îÄ‚îÄ use-toast.ts
‚îÇ
‚îú‚îÄ‚îÄ scripts/                      # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ 001_create_tables.sql
‚îÇ   ‚îú‚îÄ‚îÄ 002_add_project_members.sql
‚îÇ   ‚îú‚îÄ‚îÄ 003_add_project_visibility.sql
‚îÇ   ‚îú‚îÄ‚îÄ 003_add_task_content_fields.sql
‚îÇ   ‚îú‚îÄ‚îÄ 004_add_task_connections.sql
‚îÇ   ‚îú‚îÄ‚îÄ 009_add_access_code.sql
‚îÇ   ‚îî‚îÄ‚îÄ ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏)
‚îÇ
‚îú‚îÄ‚îÄ public/                       # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ icon.svg
‚îÇ   ‚îú‚îÄ‚îÄ placeholder.svg
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ styles/                       # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ globals.css
‚îÇ
‚îú‚îÄ‚îÄ package.json                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ tsconfig.json                 # TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ next.config.mjs              # Next.js –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ tailwind.config.js            # Tailwind –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ .gitignore
```

---

## –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Supabase –∫–ª–∏–µ–Ω—Ç–∞

### –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∫–ª–∏–µ–Ω—Ç (`lib/supabase/client.ts`)

```typescript
import { createBrowserClient } from "@supabase/ssr"

export function createClient() {
  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL
  const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY
  
  if (!supabaseUrl || !supabaseAnonKey) {
    throw new Error("Missing Supabase environment variables")
  }
  
  return createBrowserClient(supabaseUrl, supabaseAnonKey)
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –í –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö (`"use client"`)
- –î–ª—è realtime –ø–æ–¥–ø–∏—Å–æ–∫
- –î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Ç—Ä–µ–±—É—é—â–∏—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–ª–∏–µ–Ω—Ç (`lib/supabase/server.ts`)

```typescript
import { createServerClient } from "@supabase/ssr"
import { cookies } from "next/headers"

export async function createClient() {
  const cookieStore = await cookies()
  
  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        getAll() {
          return cookieStore.getAll()
        },
        setAll(cookiesToSet) {
          try {
            cookiesToSet.forEach(({ name, value, options }) =>
              cookieStore.set(name, value, options)
            )
          } catch {
            // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –≤ Server Components
          }
        },
      },
    }
  )
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –í Server Components
- –í API Routes
- –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

```typescript
const supabase = createClient()

const { data, error } = await supabase
  .from('tasks')
  .insert({
    project_id: 'project-id',
    parent_id: null,
    title: '–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞',
    owner_id: 'user-id',
    assignee_id: 'user-id',
    status: 'todo',
    position_x: 400,
    position_y: 200,
    color: '107, 114, 128'
  })
  .select()
  .single()

if (error) {
  console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏:', error)
} else {
  console.log('–ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞:', data)
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```typescript
const supabase = createClient()

const channel = supabase
  .channel('tasks-channel')
  .on(
    'postgres_changes',
    {
      event: '*',
      schema: 'public',
      table: 'tasks',
      filter: `project_id=eq.${projectId}`
    },
    (payload) => {
      if (payload.eventType === 'INSERT') {
        console.log('–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞:', payload.new)
      } else if (payload.eventType === 'UPDATE') {
        console.log('–ó–∞–¥–∞—á–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞:', payload.new)
      } else if (payload.eventType === 'DELETE') {
        console.log('–ó–∞–¥–∞—á–∞ —É–¥–∞–ª–µ–Ω–∞:', payload.old)
      }
    }
  )
  .subscribe()

// –ù–µ –∑–∞–±—É–¥—å—Ç–µ –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è
return () => {
  supabase.removeChannel(channel)
}
```

### –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```typescript
const supabase = await createClient() // —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–ª–∏–µ–Ω—Ç

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
const { data: { user } } = await supabase.auth.getUser()
if (!user) {
  redirect('/auth/login')
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—á–∞—Å—Ç–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ
const { data: membership } = await supabase
  .from('project_members')
  .select('role')
  .eq('project_id', projectId)
  .eq('user_id', user.id)
  .maybeSingle()

const canEdit = membership?.role === 'owner' || membership?.role === 'editor'
```

---

## –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –¥—Ä—É–≥—É—é –ë–î (–ù–û–í–û–ï –†–ï–®–ï–ù–ò–ï)

### ‚ö†Ô∏è –í–ê–ñ–ù–û: Supabase - —ç—Ç–æ –°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï!

–¢–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Supabase, –Ω–æ **–ù–û–í–´–ô –ü–†–û–ï–ö–¢ –î–û–õ–ñ–ï–ù –†–ê–ë–û–¢–ê–¢–¨ –° –î–†–£–ì–û–ô –ë–ê–ó–û–ô –î–ê–ù–ù–´–•!**

### –®–∞–≥ 1: –í—ã–±–æ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:**
- **PostgreSQL** - —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **MySQL** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ PostgreSQL
- **MongoDB** - NoSQL –ë–î (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å —Å—Ö–µ–º—ã)

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ –ø–∞–ø–∫–∏ `scripts/` –∫–∞–∫ –æ—Å–Ω–æ–≤—É, –Ω–æ –∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—É—é –ë–î:

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã** (–∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ `001_create_tables.sql`)
2. **–°–æ–∑–¥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã** –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏** (foreign keys)
4. **–°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π

**–ü—Ä–∏–º–µ—Ä –¥–ª—è PostgreSQL (–±–µ–∑ Supabase):**

```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã profiles
CREATE TABLE profiles (
  id UUID PRIMARY KEY,
  display_name TEXT NOT NULL,
  avatar_color TEXT DEFAULT '#ef4444',
  avatar_image TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã projects
CREATE TABLE projects (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  owner_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  is_public BOOLEAN DEFAULT FALSE,
  access_code TEXT UNIQUE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- –ò —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü...
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ Backend API

**–í–∞—Ä–∏–∞–Ω—Ç A: Node.js + Express**

```bash
mkdir backend
cd backend
npm init -y
npm install express pg jsonwebtoken bcryptjs cors dotenv
npm install -D @types/express @types/node typescript ts-node
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ backend:**
```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts          # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ projects.ts     # –ü—Ä–æ–µ–∫—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks.ts         # –ó–∞–¥–∞—á–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users.ts         # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ controllers/         # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ models/              # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ middleware/          # Middleware (auth, validation)
‚îÇ   ‚îú‚îÄ‚îÄ db/                  # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ server.ts            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json
```

**–ü—Ä–∏–º–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL:**

```typescript
// src/db/connection.ts
import { Pool } from 'pg';

const pool = new Pool({
  host: process.env.DB_HOST,
  port: parseInt(process.env.DB_PORT || '5432'),
  database: process.env.DB_NAME,
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
});

export default pool;
```

**–ü—Ä–∏–º–µ—Ä API —Ä–æ—É—Ç–∞:**

```typescript
// src/routes/tasks.ts
import express from 'express';
import pool from '../db/connection';
import { authenticateToken } from '../middleware/auth';

const router = express.Router();

// –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞
router.get('/projects/:projectId/tasks', authenticateToken, async (req, res) => {
  const { projectId } = req.params;
  const userId = req.user.id; // –∏–∑ JWT —Ç–æ–∫–µ–Ω–∞
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
  const memberCheck = await pool.query(
    'SELECT role FROM project_members WHERE project_id = $1 AND user_id = $2',
    [projectId, userId]
  );
  
  if (memberCheck.rows.length === 0) {
    return res.status(403).json({ error: 'Access denied' });
  }
  
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á
  const result = await pool.query(
    'SELECT * FROM tasks WHERE project_id = $1 ORDER BY created_at',
    [projectId]
  );
  
  res.json(result.rows);
});

export default router;
```

### –®–∞–≥ 4: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**JWT —Ç–æ–∫–µ–Ω—ã:**

```typescript
// src/middleware/auth.ts
import jwt from 'jsonwebtoken';

export const authenticateToken = (req, res, next) => {
  const authHeader = req.headers['authorization'];
  const token = authHeader && authHeader.split(' ')[1];
  
  if (!token) {
    return res.status(401).json({ error: 'No token provided' });
  }
  
  jwt.verify(token, process.env.JWT_SECRET, (err, user) => {
    if (err) {
      return res.status(403).json({ error: 'Invalid token' });
    }
    req.user = user;
    next();
  });
};
```

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–í—Ö–æ–¥:**

```typescript
// src/routes/auth.ts
import bcrypt from 'bcryptjs';
import jwt from 'jsonwebtoken';
import pool from '../db/connection';

router.post('/register', async (req, res) => {
  const { email, password, displayName } = req.body;
  
  // –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è
  const hashedPassword = await bcrypt.hash(password, 10);
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const userResult = await pool.query(
    'INSERT INTO users (email, password_hash) VALUES ($1, $2) RETURNING id',
    [email, hashedPassword]
  );
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
  await pool.query(
    'INSERT INTO profiles (id, display_name) VALUES ($1, $2)',
    [userResult.rows[0].id, displayName]
  );
  
  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–∞
  const token = jwt.sign(
    { id: userResult.rows[0].id, email },
    process.env.JWT_SECRET,
    { expiresIn: '7d' }
  );
  
  res.json({ token, user: { id: userResult.rows[0].id, email } });
});
```

### –®–∞–≥ 5: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Realtime —á–µ—Ä–µ–∑ WebSockets

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Socket.io:**

```bash
npm install socket.io
```

```typescript
// src/server.ts
import { Server } from 'socket.io';

const io = new Server(server, {
  cors: {
    origin: process.env.FRONTEND_URL,
    methods: ['GET', 'POST']
  }
});

// –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è WebSocket
io.use((socket, next) => {
  const token = socket.handshake.auth.token;
  jwt.verify(token, process.env.JWT_SECRET, (err, user) => {
    if (err) return next(new Error('Authentication error'));
    socket.user = user;
    next();
  });
});

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
io.on('connection', (socket) => {
  socket.on('subscribe:project', (projectId) => {
    socket.join(`project:${projectId}`);
  });
  
  socket.on('unsubscribe:project', (projectId) => {
    socket.leave(`project:${projectId}`);
  });
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
export function broadcastTaskUpdate(projectId, event, data) {
  io.to(`project:${projectId}`).emit('task:update', { event, data });
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ API:**

```typescript
// –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏
router.put('/tasks/:taskId', authenticateToken, async (req, res) => {
  // ... –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î ...
  
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket
  broadcastTaskUpdate(projectId, 'UPDATE', updatedTask);
  
  res.json(updatedTask);
});
```

**–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (Next.js):**

```typescript
// lib/websocket.ts
import { io, Socket } from 'socket.io-client';

let socket: Socket | null = null;

export function connectSocket(token: string) {
  socket = io(process.env.NEXT_PUBLIC_API_URL, {
    auth: { token }
  });
  
  return socket;
}

export function subscribeToProject(projectId: string, callback: (data: any) => void) {
  if (!socket) return;
  
  socket.emit('subscribe:project', projectId);
  socket.on('task:update', callback);
}

export function disconnectSocket() {
  if (socket) {
    socket.disconnect();
    socket = null;
  }
}
```

### –®–∞–≥ 6: –ê–¥–∞–ø—Ç–∞—Ü–∏—è Frontend

**–ó–∞–º–µ–Ω–∏—Ç–µ Supabase –∫–ª–∏–µ–Ω—Ç –Ω–∞ –æ–±—ã—á–Ω—ã–µ fetch –∑–∞–ø—Ä–æ—Å—ã:**

```typescript
// lib/api/client.ts
const API_URL = process.env.NEXT_PUBLIC_API_URL;

export async function apiRequest(endpoint: string, options: RequestInit = {}) {
  const token = localStorage.getItem('token');
  
  const response = await fetch(`${API_URL}${endpoint}`, {
    ...options,
    headers: {
      'Content-Type': 'application/json',
      'Authorization': token ? `Bearer ${token}` : '',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    throw new Error(`API error: ${response.statusText}`);
  }
  
  return response.json();
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
export async function getTasks(projectId: string) {
  return apiRequest(`/projects/${projectId}/tasks`);
}

export async function createTask(projectId: string, taskData: any) {
  return apiRequest(`/projects/${projectId}/tasks`, {
    method: 'POST',
    body: JSON.stringify(taskData),
  });
}
```

**–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

```typescript
// components/task-board.tsx
import { getTasks, createTask } from '@/lib/api/client';
import { subscribeToProject } from '@/lib/websocket';

// –í–º–µ—Å—Ç–æ supabase.from('tasks').select()
const tasks = await getTasks(projectId);

// –í–º–µ—Å—Ç–æ supabase realtime –ø–æ–¥–ø–∏—Å–∫–∏
useEffect(() => {
  const socket = subscribeToProject(projectId, (data) => {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
    if (data.event === 'UPDATE') {
      setTasks(prev => prev.map(t => t.id === data.data.id ? data.data : t));
    }
  });
  
  return () => {
    socket?.off('task:update');
  };
}, [projectId]);
```

### –®–∞–≥ 7: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**.env.local (Frontend):**
```env
NEXT_PUBLIC_API_URL=http://localhost:3001
```

**.env (Backend):**
```env
# Database
DB_HOST=localhost
DB_PORT=5432
DB_NAME=taskmanager
DB_USER=postgres
DB_PASSWORD=postgres

# JWT
JWT_SECRET=your-secret-key-here

# Server
PORT=3001
FRONTEND_URL=http://localhost:3000
```

### –®–∞–≥ 8: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

**Backend:**
```bash
cd backend
npm run dev  # –∏–ª–∏ npm start
```

**Frontend:**
```bash
cd frontend  # –∏–ª–∏ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
npm run dev
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### ‚ö†Ô∏è –í–ê–ñ–ù–û–ï –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ï:

**–¢–ï–ö–£–©–ò–ô –ü–†–û–ï–ö–¢ –ò–°–ü–û–õ–¨–ó–£–ï–¢ SUPABASE - –≠–¢–û –°–¢–ê–†–û–ï –†–ï–®–ï–ù–ò–ï!**

–î–∞–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã.

**–î–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Supabase
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω—É—é –ë–î (PostgreSQL/MySQL/MongoDB)
- ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π REST API
- ‚úÖ –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ JWT
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WebSockets –¥–ª—è realtime

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

1. ‚úÖ –í—ã–±–µ—Ä–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (PostgreSQL —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
2. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ —Å—Ö–µ–º—É –ë–î –Ω–∞ –æ—Å–Ω–æ–≤–µ SQL —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏–∑ `scripts/`
3. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ Backend API (Node.js/Express –∏–ª–∏ NestJS)
4. ‚úÖ –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (JWT)
5. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ WebSockets –¥–ª—è realtime
6. ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ Frontend –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º API

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:

- [PostgreSQL Documentation](https://www.postgresql.org/docs/)
- [Express.js Documentation](https://expressjs.com/)
- [Socket.io Documentation](https://socket.io/docs/)
- [Next.js Documentation](https://nextjs.org/docs)
- [JWT Authentication](https://jwt.io/)

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —É—Ç–æ—á–Ω–µ–Ω–∏–π –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É –∫–æ–¥—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.
